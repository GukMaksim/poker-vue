# Рефакторинг Poker Vue App

## Огляд змін

Цей рефакторинг покращив структуру коду, розділивши монолітний `App.vue` файл на менші, більш керовані компоненти та винісши логіку в окремі composables.

## Нова структура проекту

```
src/
├── components/
│   ├── Card.vue              # Компонент карти (існував)
│   ├── PayoutTable.vue       # Таблиця виплат
│   ├── MessageBoard.vue      # Відображення повідомлень
│   ├── HandDisplay.vue       # Відображення руки карт
│   ├── BalanceDisplay.vue    # Відображення балансу
│   └── GameControls.vue      # Кнопки управління грою
├── composables/
│   ├── useGameState.js       # Управління станом гри
│   ├── useCardLogic.js       # Логіка роботи з картами
│   ├── useGameLogic.js       # Основна логіка гри
│   └── useDoubleLogic.js     # Логіка режиму подвоєння
├── logic/
│   └── pokerLogic.js         # Логіка покеру (існував)
└── App.vue                   # Основний компонент (рефакторований)
```

## Основні покращення

### 1. Розділення відповідальності
- **Компоненти**: Відповідають тільки за відображення UI
- **Composables**: Містять бізнес-логіку та стан
- **App.vue**: Координує взаємодію між компонентами

### 2. Composables

#### `useGameState.js`
- Централізоване управління станом гри
- Константи гри (баланс, ставки, стани)
- Обчислювані властивості
- Функції для скидання стану

#### `useCardLogic.js`
- Логіка роботи з картами
- Функції для анімацій карт
- Перевірки стану карт (прихована, вибирається, тощо)

#### `useGameLogic.js`
- Основна логіка гри (роздача, заміна карт)
- Асинхронні операції з анімаціями
- Оцінка результатів

#### `useDoubleLogic.js`
- Логіка режиму подвоєння виграшу
- Вибір карт та порівняння
- Управління виграшами

### 3. Компоненти

#### `PayoutTable.vue`
- Відображення таблиці виплат
- Підсвічування виграшної комбінації

#### `MessageBoard.vue`
- Відображення повідомлень гри

#### `HandDisplay.vue`
- Відображення руки з 5 карт
- Обробка подій карт

#### `BalanceDisplay.vue`
- Відображення балансу та ставки

#### `GameControls.vue`
- Кнопки управління грою
- Різні стани кнопок залежно від стану гри

## Переваги рефакторингу

### 1. Покращена читабельність
- Кожен файл має чітку відповідальність
- Менший розмір файлів
- Легше знайти потрібний код

### 2. Повторне використання
- Composables можна використовувати в інших компонентах
- Компоненти можна легко тестувати окремо

### 3. Підтримка
- Легше додавати нові функції
- Простіше виправляти помилки
- Кращий контроль над станом

### 4. Тестування
- Можна тестувати логіку окремо від UI
- Легше писати unit тести

## Використання

### Основні composables

```javascript
// Управління станом
const {
  balance,
  gameState,
  message,
  // ... інші властивості
} = useGameState();

// Логіка карт
const {
  isCardHidden,
  toggleHold,
  animateCardFlip
} = useCardLogic(gameState, hand, held, flippingCards, flippedCards);

// Основна логіка гри
const { handleDealDraw } = useGameLogic(/* параметри */);

// Логіка подвоєння
const { startDouble, collectWinnings } = useDoubleLogic(/* параметри */);
```

### Компоненти

```vue
<template>
  <PayoutTable :winning-combo="winningCombo" />
  <MessageBoard :message="message" />
  <HandDisplay 
    :hand="hand"
    :held="held"
    @toggle-hold="toggleHold"
    @card-select="selectCard"
  />
  <BalanceDisplay :balance="balance" />
  <GameControls 
    :game-state="gameState"
    @deal-draw="handleDealDraw"
    @collect-winnings="collectWinnings"
  />
</template>
```

## Наступні кроки

1. **Додати TypeScript** для кращої типізації
2. **Написати unit тести** для composables
3. **Додати Pinia store** для глобального стану
4. **Покращити анімації** з використанням Vue Transition
5. **Додати інтернаціоналізацію** для повідомлень

## Висновок

Рефакторинг значно покращив структуру коду, зробивши його більш модульним, читабельним та підтримуваним. Кожна частина коду тепер має чітку відповідальність, що полегшує розробку та тестування. 